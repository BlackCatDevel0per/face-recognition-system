{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Face control</title>
    <link rel="stylesheet" href="{% static 'DjangoWebcamStreaming/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'DjangoWebcamStreaming/css/media.css' %}">
</head>
<body>
    
    <main class="main">
        <h1 class="title">Face control</h1>
        <div class="face_main">
            <div class="face_data">
                <table class="face_control_table table1">
                    <tbody>
                        <tr>
                            <td>Name</td>
                            <td><span id="name">None</span></td>
                        </tr>
                        <tr>
                            <td>Surname</td>
                            <td><span id="surname">None</span></td>
                        </tr>
                        <tr>
                            <td>Birth date</td>
                            <td><span id="birth_date">None</span></td>
                        </tr>
                        <tr>
                            <td>Phone</td>
                            <td><span id="phone">None</span></td>
                        </tr>
                        <tr>
                            <td>Parents Phone</td>
                            <td><span id="parents_phone">None</span></td>
                        </tr>
                        <tr>
                            <td>debt</td>
                            <td><span id="debt">None</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="face_img">
                <!-- <img class="faceid_img" src="{% static 'DjangoWebcamStreaming/img/face_recognition.jfif' %}" alt=""> -->
                <img class="faceid_img" src="{% url 'video_feed' %}" alt="" style="margin-left: 50px;">
            </div>
        </div>
    </main>
    <script>
           setInterval( function check(){
            if (window.XMLHttpRequest) {
          // code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
        } else {  // code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function() {
          if (this.readyState==4 && this.status==200) {
          let data = JSON.parse(this.responseText);
          // console.log(data)
            if (data){
              document.getElementById('name').innerHTML = data.name
              document.getElementById('surname').innerHTML = data.surname
              document.getElementById('birth_date').innerHTML = data.birth_date
              document.getElementById('phone').innerHTML = data.phone
              document.getElementById('parents_phone').innerHTML = data.parents_phone
              document.getElementById('debt').innerHTML = data.debt
              document.getElementById('parents_info').innerHTML = data.parents_info
              document.getElementById('parents_status').innerHTML = data.parents_status
              document.getElementById('discount').innerHTML = data.dicount
              document.getElementById('uuid').innerHTML = data.uuid
            }

          }
        }
        let url = "/check"
        xmlhttp.open("GET",url,true);
        xmlhttp.send();

           } ,2000)
         </script>

</body>
</html>